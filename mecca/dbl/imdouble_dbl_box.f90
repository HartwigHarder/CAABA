! ==============================================================================
! {%CMODEL}_dbl_box
! generated: {%TIMEDATE}
!
! this module is generated by imtag utility
!
! inter-configuration driver module
! level: boxmodel
!
! {$DBL_INFO} ! this is a template for isotopes configuration
!
! [Gromov, MPI-C, 2007-2008]
! ==============================================================================

! - general doubling parameters (as conditional defines) -----------------------

#include "{%CMODEL}_dbl_parameters.inc"

! -----------------------------------------------------------------------------

MODULE {%CMODEL}_dbl_box

  USE messy_mecca_kpp ! dp, ...

! configurations linked
! {$CONF_LIST} [%  USE {%CMODEL}_#%]
! {$CONF_LIST} [%  USE {%CMODEL}_#_box%]

  IMPLICIT NONE

  PUBLIC mecca_dbl_emis
  PUBLIC mecca_dbl_postprocess      ! substitutes calc totals/deltas/fractions
  PUBLIC mecca_dbl_resetPTs
  PUBLIC mecca_dbl_init
  PUBLIC mecca_dbl_result
  PUBLIC mecca_dbl_finish

! =============================================================================

CONTAINS

! -----------------------------------------------------------------------------

  SUBROUTINE mecca_dbl_x0
  
    IMPLICIT NONE

! {$CONF_LIST} [%    CALL #_x0%]

#ifdef DEBUG
    print *,'dbl_x0: passed'
#endif 

  END SUBROUTINE mecca_dbl_x0



! -----------------------------------------------------------------------------

  SUBROUTINE mecca_dbl_emis
 
    IMPLICIT NONE
    
  ! TODO: emissions code for all configurations can be introduced here

  ! z.B.
  ! #ifdef dbl_IC
  !   dbl_IC_emis(dbl_IC_CH4, 1.0E-9*cair, -52.6_dp+2.6_dp)
  ! #endif
  
#ifdef DEBUG
    print *,'dbl_emis: passed'
#endif 

  END SUBROUTINE mecca_dbl_emis



! -----------------------------------------------------------------------------

  SUBROUTINE mecca_dbl_postprocess

    IMPLICIT NONE

! {$CONF_LIST} [%    CALL #_postprocess%]

  ! by default, to remove deviation due to KIEs, correcting
! {$CONF_LIST} [%    CALL #_correct2reg(C)%]

#ifdef DEBUG
    print *,'dbl_postprocess: passed'
#endif 

  END SUBROUTINE mecca_dbl_postprocess



! -----------------------------------------------------------------------------
 
  SUBROUTINE mecca_dbl_resetPTs
  
    IMPLICIT NONE
    
! {$CONF_LIST} [%    CALL #_resetPTs(C)%]

#ifdef DEBUG
    print *,'dbl_resetPTs: passed'
#endif 

  END SUBROUTINE mecca_dbl_resetPTs


! -----------------------------------------------------------------------------

  SUBROUTINE mecca_dbl_init

    IMPLICIT NONE

    CALL mecca_dbl_x0

! {$CONF_LIST} [%    CALL #_init%]
  
#ifdef DEBUG
    print *,'dbl_init: passed'
#endif 

  END SUBROUTINE mecca_dbl_init



! -----------------------------------------------------------------------------

  SUBROUTINE mecca_dbl_result(model_time)
  
    IMPLICIT NONE
    
    REAL(dp), INTENT(IN) :: model_time
    
! {$CONF_LIST} [%    CALL #_result(model_time)%]

#ifdef DEBUG
    print *,'dbl_result: passed'
#endif 

  END SUBROUTINE mecca_dbl_result



! ---------------------------------------------------------------------------

  SUBROUTINE mecca_dbl_finish

! {$CONF_LIST} [%    CALL #_finish%]

#ifdef DEBUG
    print *,'dbl_finish: passed'
#endif 

  END SUBROUTINE mecca_dbl_finish



! ---------------------------------------------------------------------------

END MODULE {%CMODEL}_dbl_box

! ***************************************************************************

